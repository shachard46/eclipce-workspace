<%@page import="java.util.Date"%>
<%@ page contentType="text/html" pageEncoding="UTF-8"%>
<%@ page import="java.sql.*"%>
<html>
<head>
<link rel="stylesheet" type="text/css" href="style.css" />
</head>
<body>
	<%
		try {
			Class.forName("com.mysql.jdbc.Driver");
			Connection con = DriverManager.getConnection("jdbc:mysql://127.0.0.1:3306/db", "root", "");
			Statement st = con.createStatement(ResultSet.TYPE_SCROLL_INSENSITIVE, ResultSet.CONCUR_UPDATABLE);

			String mySQL = "SELECT * FROM members";

			ResultSet oRS = st.executeQuery(mySQL);
			String[] userInfo = new String[8];
			userInfo[0] = request.getParameter("username");
			userInfo[1] = request.getParameter("password");
			userInfo[2] = request.getParameter("email");
			userInfo[3] = request.getParameter("compType");
			userInfo[4] = request.getParameter("teamNumber");
			userInfo[5] = request.getParameter("country");
			userInfo[6] = request.getParameter("teamJob");
			userInfo[7] = request.getParameter("rookieTime");

			mySQL = "Insert into members values(";
			for (int i = 0; i < userInfo.length; i++) {
				mySQL += "'" + userInfo[0] + "'";
			}
			mySQL += ");";
			int updated = st.executeUpdate(mySQL);
			mySQL = "SELECT * FROM members";

			oRS = st.executeQuery(mySQL);
			oRS.beforeFirst();

			while (oRS.next()) {
				out.print("<tr>");
				for (int i = 1; i <= 8; i++) // יש 3עמודות כי נוספה עמודה למיספור אוטומטי
				{
					out.print("<td>" + oRS.getString(i) + "</td>");
					//System.out.println(oRS.getString(i));
				}
				out.print("</tr>");
			}
			out.print("</table>");
			oRS.next();

			oRS.close();
			st.close();
//			con.close();

		} catch (Exception e) {
			e.printStackTrace();
			System.out.println("Error in connecting \n"+ e.getMessage());

		}
	%>
</body>
</html>
